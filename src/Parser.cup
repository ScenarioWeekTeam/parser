 
import java_cup.runtime.*;

parser code {:

    scanner s;
    
    Parser(scanner s) {
        this.s = s;
    }
    
:}

init with {: s.init(); :};

scan with {: return s.next_token(); :};

terminal LOOP, POOL, IF, THEN, ELSE, FI, BREAK, FDEF, TDEF, IN, ALIAS, READ, PRINT, MAIN, CHAR_TYPE, BOOL_TYPE, INT_TYPE, RAT_TYPE, FLOAT_TYPE, DICT_TYPE, SEQ_TYPE, TOP_TYPE, NULL, NOT, AND, OR, IMPLICATION, ADD, MINUS, TIMES, DIVIDE, POWER, LESSTHAN, LESSTHANEQUAL, EQUAL, NOTEQUAL, ASSIGN, LPARENS, RPARENS, COLON, LBRACKET, RBRACKET, SEMICOLON, GREATERTHAN, COMMA, QUESTION;
terminal Character CHAR;
terminal Integer INT;
terminal Rational RAT;
terminal Double FLOAT;
terminal String STRING;
terminal Character BOOL;
terminal String IDENTIFIER;

precedence nonassoc ELSE;
precedence left IN;
precedence left CONCAT;
precedence left AND, OR, IMPLICATION;
precedence left LESSTHAN, LESSTHANEQUAL, EQUAL, NOTEQUAL;
precedence left ADD, MINUS;
precedence left TIMES, DIVIDE;
precedence left POWER;
precedence right NOT;

program ::= stmtlist:s
    ;
stmtlist ::= stmtlist:s1 stmt:s
    ;
stmt ::= IDENTIFIER:identifier ASSIGN expr:e
    | IDENTIFIER:identifier COLON type:t SEMICOLON
    | IDENTIFIER:identifier COLON type:t ASSIGN expr:e SEMICOLON
    | TDEF LBRACE deccllist:d RBRACE SEMICOLON
    | FDEF IDENTIFIER:identifier LPARENS decllist:p RPARENS LBRACE stmtlist:s RBRACE SEMICOLON
    | FDEF IDENTIFIER:identifier LPARENS decllist:p RPARENS LBRACE stmtlist:s RBRACE COLON type:t SEMICOLON
    | READ IDENTIFIER:identifier SEMICOLON
    | PRINT expr:e SEMICOLON
    | IF LPARENS expr:e RPARENS THEN stmtlist:s FI
    | IF LPARENS expr:e RPARENS THEN stmtlist:s1 ELSE stmtlist:s2 FI
    | LOOP stmtlist:s POOL
    | BREAK expr:e SEMICOLON
    | BREAK SEMICOLON
    | RETURN expr:e SEMICOLON
    | RETURN SEMICOLON
    ;
decllist ::= decl:d 
    | decllist:d1 COMMA decl:d2
    ;
decl ::= IDENTIFIER:identifier COLON type:t 
    ;
function ::= MAIN
    | IDENTIFIER:identifier
    ;
type ::= CHAR_TYPE
    | INT_TYPE
    | RAT_TYPE
    | FLOAT_TYPE
    | SEQ_TYPE LESSTHAN type:t GREATERTHAN
    | DICT_TYPE LESSTHAN type:t1 COMMA type:t2 GREATERTHAN
    | BOOL_TYPE
    | TOP_TYPE
    | IDENTIFIER:identifier
